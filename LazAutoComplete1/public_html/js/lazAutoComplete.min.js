(function(a){jQuery.expr[":"].Contains=function(c,d,b){return jQuery(c).text().toUpperCase().indexOf(b[3].toUpperCase())>=0};jQuery.expr[":"].contains=function(c,d,b){return jQuery(c).text().toUpperCase().indexOf(b[3].toUpperCase())>=0};a.fn.lazAutoComplete=function(b,c){this.each(function(){var e=a(this);var h=a("<span></span>");h.addClass("lazAutoComplete");var j=a("<input />");if(b.placeholder){j.attr("placeholder",b.placeholder)}j.attr({type:"input",name:e.attr("name")});var g=a("<button ></button>");var d=a("<ul></ul>");e.children().each(function(){d.append("<li value='"+a(this).val()+"' >"+a(this).text()+"</li>")});h.append(j);h.append(g);h.append(d);g.click(function(){j.focus();e.css({background:"red"});d.children().show();j.text();d.show();if(typeof f!=="undefined"){clearTimeout(f);f=undefined}});j.keyup(function(n){d.show();if(n.keyCode==="40"||n.keyCode===40){var k=d.children(":visible");var l=0;var m=null;k.each(function(){if(a(this).attr("class")){m=l}l++});d.children().removeClass("selected");if(m===null){a(k[0]).addClass("selected")}else{if(m+1===k.length){a(k[m]).addClass("selected")}else{a(k[m+1]).addClass("selected")}}i(d.children(".selected").text(),d.children(".selected").attr("value"));d.scrollTop(d.children(".selected").position().top+d.scrollTop())}else{if(n.keyCode==="38"||n.keyCode===38){var k=d.children(":visible");var l=0;var m=null;k.each(function(){if(a(this).attr("class")){m=l}l++});d.children().removeClass("selected");if(m===null){a(k[l-1]).addClass("selected")}else{if(m-1===-1){a(k[0]).addClass("selected")}else{a(k[m-1]).addClass("selected")}}i(d.children(".selected").text(),d.children(".selected").attr("value"));d.scrollTop(d.children(".selected").position().top+d.scrollTop())}else{if(n.keyCode===13||n.keyCode==="13"){i(d.children(".selected").text(),d.children(".selected").attr("value"));d.hide();if(typeof c!=="undefined"){c(j.val(),j.attr("v"))}}else{if(a(this).val()){d.children("li").hide();d.children("li:contains("+a(this).val()+")").show();d.children("li:visible:eq(0)").addClass("selected")}else{d.children("li").show().removeClass("selected")}}}}});j.focusin(function(){h.addClass("focus")});j.focusout(function(){h.removeClass("focus")});d.children("li").click(function(){i(a(this).text(),a(this).attr("value"));if(typeof c!=="undefined"){c(j.val(),j.attr("v"))}d.hide()});var f;j.focusout(function(){f=setTimeout(function(){d.hide()},100)});e.before(h);e.hide();return h;function i(l,k){j.val(l);j.attr("v",k);e.val(k)}})}})(jQuery);